# ExternalSecret for Directus CMS integration
# This will sync Directus API credentials from Vault to a K8s Secret
# Enable when Directus integration is implemented
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: blog-directus-credentials
  namespace: blog
  labels:
    app.kubernetes.io/name: blog
spec:
  refreshInterval: 1h
  secretStoreRef:
    kind: ClusterSecretStore
    name: vault-backend
  target:
    name: blog-directus-credentials
    creationPolicy: Owner
  data:
    - secretKey: DIRECTUS_URL
      remoteRef:
        key: blog
        property: directus_url
    - secretKey: DIRECTUS_TOKEN
      remoteRef:
        key: blog
        property: directus_token
